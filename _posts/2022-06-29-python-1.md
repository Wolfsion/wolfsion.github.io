---
layout: post
title:  "Python远程项目配置"
date:   2022-06-29
excerpt: "PyCharm远程项目配置"
tags: [Python]
comments: true
---

# Python远端环境配置
## 适合此博文的读者
Python的一个主要应用场景为数据分析或数据挖掘，最典型的技术为机器学习。深度学习作为机器学习的一个分支，运行相关代码往往需要昂贵的计算成本。倘若你在深度学习领域有工程实现的需求，并且本机的机能受限，需要将本地的代码提交到远端的高性能服务器上测试运行，那这篇文章很适合你，主要的内容概括为如下两点：
1. 简短介绍使用到的工具，给出推荐的理由。
2. 多个工具间如何协同配置，以满足我们的目的——配置远端开发环境。



## 为什么使用如下工具

### PyCharm
一般的本科课程学习中，我们编写一个.py文件便可以完成任务，类似诸如输出一个hello world，亦或是经典的海龟绘图。应对实际问题，编写逻辑很复杂，当然可以将所有代码都写在同一个.py文件，只不过后期修改阅读代码是痛苦的，所以我们需要一个层级递进的文件目录去组织我们的工程项目。
现代的可视化编辑器也可以高效地修改目录、跳转文件，但语言环境的配置受限并且一般是手动的，所以我们需要一个打包环境和编辑文本的工具——集成开发环境，即IDE。优秀的IDE可以做到代码自动补全、代码审查、索引维护、包管理等等诸多功能，总之它旨在提高coder的开发效率，让其更关注代码编写本身。另外，外观上可以做更多的个性化定制，主题、字体和其他元素都可以精心修缮。
Jetbrain作为IDE市场的龙头企业，PyCharm为其旗下试用于Python的集成开发环境，该公司打磨的产品相对成熟，市面上的主流语言几乎都提供对应的IDE。Jetbrain之前一度认为Java存在诸多的弊端，提出了自己的语言Kotlin。

### Git
一个复杂工程项目的开发周期很久，需要持续迭代。一段时间完成的内容可能是整个代码主体的一个小模块，测试debug之后，我们一般要暂存此时的代码状态，因为防止将来的编写内容使得代码无法运行，且难以恢复到之前的状态，这一点类似于游戏存档。最简单的做法是复制整个项目主体，留一份拷贝。
Git可以很轻松地完成这个工作，如果有cs基础，可以在1h内速成一些常用命令，可以参考这个视频：https://www.bilibili.com/video/BV1r741127CM?spm_id_from=333.999.0.0
当然Git还有一个更重要的功能：团队协作，这一点可以详细查阅官方文档或相关博客。

### ssh
ssh可以帮助我们在命令行中远程连接控制远端主机，通过口令连接需要提供的必要参数包括：要连接主机的ip地址、开放端口、用户名和用户密码。我们的开发环境部署在本地，而运行环境在远端服务器，对代码进行一些必要的修改，运行前手动打包再上传到服务器显然是低效的，并且一旦遇到bug，我们不能使用IDE去调试代码，只能通过命令行调试工具，如python-pdb，这种手动调试的方法又增加了学习成本。
PyCharm中集成ssh配置，远端服务器可以自动同步本地修改的代码，每次调试运行的过程顺畅到像是在本地运行代码一样。



## 安装流程

### 开始之前
不管是安装什么软件或工具包，各个教程或博客都是具有时效性的，参考之前，务必查阅发布时间。事实上，最优先参考的资料永远是官方文档。
安装之前，需明确所依赖的基础环境，和笔者测试所用环境的差异是否会导致最终安装失败。安装配置之前，你的Windows主机已经配置了Python环境(参考版本：Windows10，Python3.6-64bit)。
多个工具间的版本迭代不同步，可能存在应用兼容问题，合适的做法是对软件或工具包进行回滚，最新的不一定是最好的。

### 具体流程
1. 安装PyCharm（需要专业版）

官方网站https://www.jetbrains.com/PyCharm/中点击下载适用于Windows系统的安装包，最好是64bit的版本，安装选项使用默认配置，注意勾选添加环境变量即可。

教师学生通过教育申请，可免费使用专业版，具体流程查看链接1。

PyCharm菜单栏等不建议使用汉化。

**验证**：双击打开PyCharm，新建工程文件，提供的hello示例可以跑通即可。



2. 安装Git

官方网站为https://git-scm.com/，其余内容同PyCharm。

**验证**：在任意终端中输入`git --version`正常回显出版本号即可。



3. 配置创建远程工程项目

具体流程可查看链接4，注意服务器需要提前配置好Python环境

**验证**：配置完成后确定，点击右侧边栏可以查看服务器中的文件目录。

![image-20220629103343916](..\assets\img\blog-py-1.png)






4. 配置公钥免密登录（可选，安全性考虑）

  + 点击前文安装好的git bash，通过ssh-keygen命令生成公私钥对，过程中一直回车即可，最终会在C:/Users/主机用户名/.ssh/下生成两个文件，id_rsa为私钥，id_rsa.pub为公钥

  + 通过scp命令或ftp协议将生成的公钥上传到服务器中

    ```sh
    # 本机上运行
    scp [-P 端口号] <本地文件路径，如id_rsa.pub> <远程文件路径remote@192.168.1.1:/home/my.pub>
    
    # 远程服务器上运行
    cat <公钥路径，如/home/my.pub> >> authorized_keys
    chmod 600 authorized_keys
    ```

  + 参考步骤3进入编译器配置选项

    ![image-20220629104721083](..\assets\img\blog-py-2.png)

    ![image-20220629104806251](..\assets\img\blog-py-3.png)

    Authentication type更改认证方式为公私钥，Private key file指定本地的私钥文件，即前文的id_rsa

    ![image-20220629104903451](..\assets\img\blog-py-4.png)

**验证**：同步骤3。



### 可查阅的名词

+ IDE
+ git
+ ssh
+ scp
+ ssh-keygen
+ python-pdb
+ 环境变量path



## 参考链接

1. PyCharm教育申请：https://blog.csdn.net/qq_45830912/article/details/114367467
2. PyCharm安装：https://zhuanlan.zhihu.com/p/509125433

3. Git安装：https://zhuanlan.zhihu.com/p/242540359

4. 远程项目配置：https://zhuanlan.zhihu.com/p/93236936

